{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Ang Kai Yang/Desktop/portfolio/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Ang Kai Yang/Desktop/portfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import SpriteSheet from'./SpriteSheet.js';import{createAnim}from'./anim.js';export function loadImage(url){return new Promise(function(resolve){var image=new Image();image.addEventListener('load',function(){resolve(image);});image.src=url;});}export function loadJSON(url){return fetch(url).then(function(r){return r.json();});}export function loadSpriteSheet(name){return loadJSON(\"./sprites/\".concat(name,\".json\")).then(function(sheetSpec){return Promise.all([sheetSpec,loadImage(sheetSpec.imageURL)]);}).then(function(_ref){var _ref2=_slicedToArray(_ref,2),sheetSpec=_ref2[0],image=_ref2[1];var sprites=new SpriteSheet(image,sheetSpec.tileW,sheetSpec.tileH);//size\nif(sheetSpec.tiles){sheetSpec.tiles.forEach(function(tileSpec){sprites.defineTile(tileSpec.name,tileSpec.index[0],tileSpec.index[1]);});}if(sheetSpec.frames){sheetSpec.frames.forEach(function(frameSpec){sprites.define.apply(sprites,[frameSpec.name].concat(_toConsumableArray(frameSpec.rect)));});}if(sheetSpec.animations){sheetSpec.animations.forEach(function(animSpec){var animation=createAnim(animSpec.frames,animSpec.frameLen);sprites.defineAnim(animSpec.name,animation);});}return sprites;});}","map":{"version":3,"sources":["C:/Users/Ang Kai Yang/Desktop/portfolio/src/js/loaders.js"],"names":["SpriteSheet","createAnim","loadImage","url","Promise","resolve","image","Image","addEventListener","src","loadJSON","fetch","then","r","json","loadSpriteSheet","name","sheetSpec","all","imageURL","sprites","tileW","tileH","tiles","forEach","tileSpec","defineTile","index","frames","frameSpec","define","rect","animations","animSpec","animation","frameLen","defineAnim"],"mappings":"4PAAA,MAAOA,CAAAA,WAAP,KAAwB,kBAAxB,CACA,OAAQC,UAAR,KAAyB,WAAzB,CAEA,MAAO,SAASC,CAAAA,SAAT,CAAmBC,GAAnB,CAAwB,CAC9B,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAAAC,OAAO,CAAI,CAC7B,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,EAAd,CACAD,KAAK,CAACE,gBAAN,CAAuB,MAAvB,CAA+B,UAAM,CACpCH,OAAO,CAACC,KAAD,CAAP,CACA,CAFD,EAGAA,KAAK,CAACG,GAAN,CAAYN,GAAZ,CACA,CANM,CAAP,CAOA,CAED,MAAO,SAASO,CAAAA,QAAT,CAAkBP,GAAlB,CAAsB,CAC5B,MAAOQ,CAAAA,KAAK,CAACR,GAAD,CAAL,CACNS,IADM,CACD,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,IAAF,EAAF,EADA,CAAP,CAEA,CAED,MAAO,SAASC,CAAAA,eAAT,CAAyBC,IAAzB,CAA8B,CACpC,MAAON,CAAAA,QAAQ,qBAAcM,IAAd,UAAR,CACNJ,IADM,CACD,SAAAK,SAAS,QAAGb,CAAAA,OAAO,CAACc,GAAR,CAAY,CAC7BD,SAD6B,CAE7Bf,SAAS,CAACe,SAAS,CAACE,QAAX,CAFoB,CAAZ,CAAH,EADR,EAKNP,IALM,CAKD,cAAqB,kCAAnBK,SAAmB,UAATX,KAAS,UAC1B,GAAMc,CAAAA,OAAO,CAAC,GAAIpB,CAAAA,WAAJ,CACdM,KADc,CAEdW,SAAS,CAACI,KAFI,CAGdJ,SAAS,CAACK,KAHI,CAAd,CAGkB;AAElB,GAAIL,SAAS,CAACM,KAAd,CAAoB,CACnBN,SAAS,CAACM,KAAV,CAAgBC,OAAhB,CAAwB,SAAAC,QAAQ,CAAE,CACjCL,OAAO,CAACM,UAAR,CACCD,QAAQ,CAACT,IADV,CAECS,QAAQ,CAACE,KAAT,CAAe,CAAf,CAFD,CAGCF,QAAQ,CAACE,KAAT,CAAe,CAAf,CAHD,EAIA,CALD,EAMA,CAED,GAAIV,SAAS,CAACW,MAAd,CAAqB,CACpBX,SAAS,CAACW,MAAV,CAAiBJ,OAAjB,CAAyB,SAAAK,SAAS,CAAE,CACnCT,OAAO,CAACU,MAAR,OAAAV,OAAO,EAAQS,SAAS,CAACb,IAAlB,4BAA2Ba,SAAS,CAACE,IAArC,GAAP,CACA,CAFD,EAGA,CAED,GAAId,SAAS,CAACe,UAAd,CAAyB,CACxBf,SAAS,CAACe,UAAV,CAAqBR,OAArB,CAA6B,SAAAS,QAAQ,CAAE,CACtC,GAAMC,CAAAA,SAAS,CAACjC,UAAU,CAACgC,QAAQ,CAACL,MAAV,CAAiBK,QAAQ,CAACE,QAA1B,CAA1B,CACAf,OAAO,CAACgB,UAAR,CAAmBH,QAAQ,CAACjB,IAA5B,CAAiCkB,SAAjC,EACA,CAHD,EAIA,CAED,MAAOd,CAAAA,OAAP,CACA,CAlCM,CAAP,CAmCA","sourcesContent":["import SpriteSheet from './SpriteSheet.js';\r\nimport {createAnim} from './anim.js';\r\n\r\nexport function loadImage(url) {\r\n\treturn new Promise(resolve => {\r\n\t\tconst image = new Image();\r\n\t\timage.addEventListener('load', () => {\r\n\t\t\tresolve(image);\r\n\t\t});\r\n\t\timage.src = url;\r\n\t});\r\n}\r\n\r\nexport function loadJSON(url){\r\n\treturn fetch(url)\r\n\t.then(r=>r.json());\r\n}\r\n\r\nexport function loadSpriteSheet(name){\r\n\treturn loadJSON(`./sprites/${name}.json`)\r\n\t.then(sheetSpec=> Promise.all([\r\n\t\tsheetSpec,\r\n\t\tloadImage(sheetSpec.imageURL),\r\n\t]))\r\n\t.then(([sheetSpec,image])=>{\r\n\t\tconst sprites=new SpriteSheet(\r\n\t\timage,\r\n\t\tsheetSpec.tileW,\r\n\t\tsheetSpec.tileH); //size\r\n\r\n\t\tif (sheetSpec.tiles){\r\n\t\t\tsheetSpec.tiles.forEach(tileSpec=>{\r\n\t\t\t\tsprites.defineTile(\r\n\t\t\t\t\ttileSpec.name,\r\n\t\t\t\t\ttileSpec.index[0],\r\n\t\t\t\t\ttileSpec.index[1]);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (sheetSpec.frames){\r\n\t\t\tsheetSpec.frames.forEach(frameSpec=>{\r\n\t\t\t\tsprites.define(frameSpec.name, ...frameSpec.rect);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (sheetSpec.animations){\r\n\t\t\tsheetSpec.animations.forEach(animSpec=>{\r\n\t\t\t\tconst animation=createAnim(animSpec.frames,animSpec.frameLen);\r\n\t\t\t\tsprites.defineAnim(animSpec.name,animation);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn sprites;\r\n\t});\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}