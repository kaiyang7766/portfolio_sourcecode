{"ast":null,"code":"import { Sides, Trait } from '../Entity.js';\nexport default class Jump extends Trait {\n  constructor() {\n    super('jump');\n    this.ready = 0;\n    this.duration = 0.5;\n    this.velocity = 200;\n    this.engageTime = 0;\n    this.requestTime = 0;\n    this.gracePeriod = 0.1;\n    this.speedBoost = 0.1;\n  }\n\n  get falling() {\n    return this.ready < 0;\n  }\n\n  start() {\n    this.requestTime = this.gracePeriod;\n  }\n\n  cancel() {\n    this.engageTime = 0;\n    this.requestTime = 0;\n  }\n\n  obstruct(entity, side) {\n    if (side === Sides.BOTTOM) {\n      this.ready = 1;\n    } else if (side === Sides.TOP) {\n      this.cancel();\n    }\n  }\n\n  update(entity, deltaTime) {\n    if (this.requestTime > 0) {\n      if (this.ready > 0) {\n        this.engageTime = 0.3;\n        this.requestTime = 0;\n      }\n\n      this.requestTime -= deltaTime;\n    }\n\n    if (this.engageTime > 0) {\n      entity.vel.y = -this.velocity + Math.abs(entity.vel.x) * this.speedBoost;\n      this.engageTime -= deltaTime;\n    }\n\n    this.ready--;\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Ang Kai Yang/Desktop/portfolio/src/main/traits/Jump.js"],"names":["Sides","Trait","Jump","constructor","ready","duration","velocity","engageTime","requestTime","gracePeriod","speedBoost","falling","start","cancel","obstruct","entity","side","BOTTOM","TOP","update","deltaTime","vel","y","Math","abs","x"],"mappings":"AAAA,SAAQA,KAAR,EAAcC,KAAd,QAA0B,cAA1B;AAEA,eAAe,MAAMC,IAAN,SAAmBD,KAAnB,CAAwB;AACtCE,EAAAA,WAAW,GAAE;AACZ,UAAM,MAAN;AAEA,SAAKC,KAAL,GAAW,CAAX;AACA,SAAKC,QAAL,GAAc,GAAd;AACA,SAAKC,QAAL,GAAc,GAAd;AACA,SAAKC,UAAL,GAAgB,CAAhB;AACA,SAAKC,WAAL,GAAiB,CAAjB;AACA,SAAKC,WAAL,GAAiB,GAAjB;AACA,SAAKC,UAAL,GAAgB,GAAhB;AACA;;AAEU,MAAPC,OAAO,GAAE;AACZ,WAAO,KAAKP,KAAL,GAAY,CAAnB;AACA;;AAEDQ,EAAAA,KAAK,GAAE;AACN,SAAKJ,WAAL,GAAiB,KAAKC,WAAtB;AACA;;AAEDI,EAAAA,MAAM,GAAE;AACP,SAAKN,UAAL,GAAgB,CAAhB;AACA,SAAKC,WAAL,GAAiB,CAAjB;AACA;;AAEDM,EAAAA,QAAQ,CAACC,MAAD,EAASC,IAAT,EAAc;AACrB,QAAIA,IAAI,KAAGhB,KAAK,CAACiB,MAAjB,EAAwB;AACvB,WAAKb,KAAL,GAAW,CAAX;AACA,KAFD,MAEO,IAAIY,IAAI,KAAGhB,KAAK,CAACkB,GAAjB,EAAqB;AAC3B,WAAKL,MAAL;AACA;AACD;;AAEDM,EAAAA,MAAM,CAACJ,MAAD,EAAQK,SAAR,EAAkB;AACvB,QAAI,KAAKZ,WAAL,GAAiB,CAArB,EAAuB;AACtB,UAAI,KAAKJ,KAAL,GAAW,CAAf,EAAiB;AAChB,aAAKG,UAAL,GAAgB,GAAhB;AACA,aAAKC,WAAL,GAAiB,CAAjB;AACA;;AAED,WAAKA,WAAL,IAAkBY,SAAlB;AACA;;AACD,QAAI,KAAKb,UAAL,GAAgB,CAApB,EAAsB;AACrBQ,MAAAA,MAAM,CAACM,GAAP,CAAWC,CAAX,GAAa,CAAC,KAAKhB,QAAN,GAAeiB,IAAI,CAACC,GAAL,CAAST,MAAM,CAACM,GAAP,CAAWI,CAApB,IAAuB,KAAKf,UAAxD;AACA,WAAKH,UAAL,IAAiBa,SAAjB;AACA;;AAED,SAAKhB,KAAL;AACA;;AAjDqC","sourcesContent":["import {Sides,Trait} from '../Entity.js';\r\n\r\nexport default class Jump extends Trait{\r\n\tconstructor(){\r\n\t\tsuper('jump');\r\n\r\n\t\tthis.ready=0;\r\n\t\tthis.duration=0.5;\r\n\t\tthis.velocity=200;\r\n\t\tthis.engageTime=0;\r\n\t\tthis.requestTime=0;\r\n\t\tthis.gracePeriod=0.1;\r\n\t\tthis.speedBoost=0.1;\r\n\t}\r\n\r\n\tget falling(){\r\n\t\treturn this.ready <0;\r\n\t}\r\n\r\n\tstart(){\r\n\t\tthis.requestTime=this.gracePeriod;\r\n\t}\r\n\r\n\tcancel(){\r\n\t\tthis.engageTime=0;\r\n\t\tthis.requestTime=0;\r\n\t}\r\n\r\n\tobstruct(entity, side){\r\n\t\tif (side===Sides.BOTTOM){\r\n\t\t\tthis.ready=1;\r\n\t\t} else if (side===Sides.TOP){\r\n\t\t\tthis.cancel();\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(entity,deltaTime){\r\n\t\tif (this.requestTime>0){\r\n\t\t\tif (this.ready>0){\r\n\t\t\t\tthis.engageTime=0.3;\r\n\t\t\t\tthis.requestTime=0;\r\n\t\t\t}\r\n\r\n\t\t\tthis.requestTime-=deltaTime;\r\n\t\t}\r\n\t\tif (this.engageTime>0){\r\n\t\t\tentity.vel.y=-this.velocity+Math.abs(entity.vel.x)*this.speedBoost;\r\n\t\t\tthis.engageTime-=deltaTime;\r\n\t\t}\r\n\r\n\t\tthis.ready--;\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}